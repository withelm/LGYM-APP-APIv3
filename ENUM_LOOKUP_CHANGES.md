# Enum Lookup Changes

## Summary

A unified enum lookup system has been introduced across the API. Every enum field in responses now returns a structured lookup object instead of a plain string. New endpoints provide enum dictionaries for client-side dropdowns. Request bodies (POST/PUT) remain unchanged and still accept plain strings like "Chest" or "kg".

## Architecture

- Each enum value is decorated with `EnumTranslationAttribute` pointing to a resource key.
- Translations live in the `Enums.resx` resource file (localized per culture).
- The `ToLookup()` extension converts an enum to an `EnumLookupDto` by reading the attribute and resource value.
- `EnumLookupDto` contains: `name`, `displayName`.

Example lookup object:

```json
{
  "name": "Chest",
  "displayName": "Klatka piersiowa"
}
```

## New endpoints

### `GET /api/enums`

Returns a list of available enum types.

```json
["BodyParts", "HeightUnits", "Platforms", "WeightUnits"]
```

### `GET /api/enums/all`

Returns all enum lookups as a list.

```json
[
  {
    "enumType": "BodyParts",
    "values": [
      {"name": "Chest", "displayName": "Klatka piersiowa"},
      {"name": "Back", "displayName": "Plecy"}
    ]
  },
  {
    "enumType": "HeightUnits",
    "values": [
      {"name": "Meters", "displayName": "Meters"},
      {"name": "Centimeters", "displayName": "Centimeters"}
    ]
  },
  {
    "enumType": "Platforms",
    "values": [
      {"name": "Android", "displayName": "Android"},
      {"name": "Ios", "displayName": "iOS"}
    ]
  },
  {
    "enumType": "WeightUnits",
    "values": [
      {"name": "Kilograms", "displayName": "kg"},
      {"name": "Pounds", "displayName": "lbs"}
    ]
  }
]
```

### `GET /api/enums/{enumType}`

Returns a lookup dictionary for a single enum type.

```json
{
  "enumType": "BodyParts",
  "values": [
    {"name": "Chest", "displayName": "Klatka piersiowa"},
    {"name": "Back", "displayName": "Plecy"},
    ...
  ]
}
```

## Changes in existing endpoints

All enum fields in responses now return lookup objects. Request bodies (POST/PUT) still accept plain strings.

**Exercise response (`bodyPart`)**

Before:
```json
{
  "_id": "abc123",
  "name": "Bench Press",
  "bodyPart": "Chest"
}
```

After:
```json
{
  "_id": "abc123",
  "name": "Bench Press",
  "bodyPart": {
    "name": "Chest",
    "displayName": "Klatka piersiowa"
  }
}
```

**Score/Training responses (`unit`)**

Before:
```json
{
  "weight": 100.0,
  "unit": "kg"
}
```

After:
```json
{
  "weight": 100.0,
  "unit": {
    "name": "Kilograms",
    "displayName": "kg"
  }
}
```

**Measurement responses (`bodyPart`)**

Before:
```json
{
  "bodyPart": "Chest",
  "value": 105.0
}
```

After:
```json
{
  "bodyPart": {
    "name": "Chest",
    "displayName": "Klatka piersiowa"
  },
  "value": 105.0
}
```

**MainRecords responses (`unit`)**

Before:
```json
{
  "weight": 200.0,
  "unit": "kg"
}
```

After:
```json
{
  "weight": 200.0,
  "unit": {
    "name": "Kilograms",
    "displayName": "kg"
  }
}
```

## Localization

Localization is driven by the `Accept-Language` header. Supported values: `en`, `pl`.

Example:

`GET /api/enums/BodyParts` with `Accept-Language: en`

```json
{
  "enumType": "BodyParts",
  "values": [
    {"name": "Chest", "displayName": "Chest"},
    {"name": "Back", "displayName": "Back"}
  ]
}
```

`GET /api/enums/BodyParts` with `Accept-Language: pl`

```json
{
  "enumType": "BodyParts",
  "values": [
    {"name": "Chest", "displayName": "Klatka piersiowa"},
    {"name": "Back", "displayName": "Plecy"}
  ]
}
```

## EnumTranslationAttribute

Enum values are decorated with the translation key using a generated constant:

```csharp
public enum BodyParts
{
    [EnumTranslation(EnumTranslationKeys.BodyParts.Chest)]
    Chest = 1,

    [EnumTranslation(EnumTranslationKeys.BodyParts.Back)]
    Back = 2
}
```

`EnumTranslationKeys` constants are auto-generated by a Roslyn source generator based on entries in `Enums.resx`.
